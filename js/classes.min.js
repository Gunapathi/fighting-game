class Sprites{constructor({position:position,imageSrc:imageSrc,scale:scale=1,framesMax:framesMax=1,offset:offset={x:0,y:0}}){this.position=position,this.width=50,this.height=150,this.image=new Image,this.image.src=imageSrc,this.scale=scale,this.framesMax=framesMax,this.frameCurrent=0,this.framesElapsed=0,this.framesHold=5,this.offset=offset}draw(){c.drawImage(this.image,this.frameCurrent*(this.image.width/this.framesMax),0,this.image.width/this.framesMax,this.image.height,this.position.x-this.offset.x,this.position.y-this.offset.y,this.image.width/this.framesMax*this.scale,this.image.height*this.scale)}update(){this.draw(),this.framesElapsed++,this.framesElapsed%this.framesHold==0&&(this.frameCurrent<this.framesMax-1?this.frameCurrent++:this.frameCurrent=0)}}class Fighter extends Sprites{constructor({position:position,velocity:velocity,color:color="red",imageSrc:imageSrc,scale:scale=1,framesMax:framesMax=1,offset:offset={x:0,y:0},Sprites:Sprites,attackBox:attackBox={offset:{},width:void 0,height:void 0}}){super({position:position,imageSrc:imageSrc,scale:scale,framesMax:framesMax,offset:offset}),this.velocity=velocity,this.width=100,this.height=150,this.lastKey,this.attackBox={position:{x:this.position.x,y:this.position.y},offset:attackBox.offset,width:attackBox.width,height:attackBox.height},this.color=color,this.isAttacking,this.health=100,this.frameCurrent=0,this.framesElapsed=0,this.framesHold=5,this.Sprites=Sprites,this.dead=!1;for(const Sprite in this.Sprites)Sprites[Sprite].image=new Image,Sprites[Sprite].image.src=Sprites[Sprite].imageSrc}update(){this.draw(),this.dead||this.animateFrames(),this.attackBox.position.x=this.position.x+this.attackBox.offset.x,this.attackBox.position.y=this.position.y+this.attackBox.offset.y,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.x>0||(this.position.x=0),this.position.x+this.width<canvas.width||(this.position.x=canvas.width-this.width),this.position.y+this.height+this.velocity.y>=canvas.height-96?(this.velocity.y=0,this.position.y=330):this.velocity.y+=gravity}animateFrames(){this.framesElapsed++,this.framesElapsed%this.framesHold==0&&(this.frameCurrent<this.framesMax-1?this.frameCurrent++:this.frameCurrent=0)}attack(){this.switchSprite("attack1"),this.isAttacking=!0}takeHit(){this.health-=10,this.health<=0?this.switchSprite("death"):this.switchSprite("takeHit")}switchSprite(Sprites){if(this.image!==this.Sprites.death.image){if(!(this.image===this.Sprites.attack1.image&&this.frameCurrent<this.Sprites.attack1.framesMax-1||this.image===this.Sprites.takeHit.image&&this.frameCurrent<this.Sprites.takeHit.framesMax-1))switch(Sprites){case"idle":this.image!=this.Sprites.idle.image&&(this.image=this.Sprites.idle.image,this.framesMax=this.Sprites.idle.framesMax,this.frameCurrent=0);break;case"run":this.image!=this.Sprites.run.image&&(this.image=this.Sprites.run.image,this.framesMax=this.Sprites.run.framesMax,this.frameCurrent=0);break;case"jump":this.image!=this.Sprites.jump.image&&(this.image=this.Sprites.jump.image,this.framesMax=this.Sprites.jump.framesMax,this.frameCurrent=0);break;case"fall":this.image!=this.Sprites.fall.image&&(this.image=this.Sprites.fall.image,this.framesMax=this.Sprites.fall.framesMax,this.frameCurrent=0);break;case"attack1":this.image!=this.Sprites.attack1.image&&(this.image=this.Sprites.attack1.image,this.framesMax=this.Sprites.attack1.framesMax,this.frameCurrent=0);break;case"takeHit":this.image!=this.Sprites.takeHit.image&&(this.image=this.Sprites.takeHit.image,this.framesMax=this.Sprites.takeHit.framesMax,this.frameCurrent=0);break;case"death":this.image!=this.Sprites.death.image&&(this.image=this.Sprites.death.image,this.framesMax=this.Sprites.death.framesMax,this.frameCurrent=0)}}else this.frameCurrent===this.Sprites.death.framesMax-1&&(this.dead=!0)}}